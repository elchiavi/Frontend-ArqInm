<form class="row mt-2" [formGroup]="form">
    <div class="col-12">
        <div class="row">
            <div class="col-sm-3">
                <div class="form-group">
                    <label for="inputSelected">Mano de Obra</label>
                    <select class="form-control" formControlName="manPower" (change)="change()"
                        [class.is-invalid]="formHelperService.canShowFieldErrors(form.get('manPower'))">
                        <option *ngFor="let manPower of manPower$ | async"
                            [value]="manPower._id">
                            {{manPower.name}}</option>
                    </select>
                    <ngx-error-field [field]="form.get('manPower')"></ngx-error-field>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <label for="inputSelected">Tareas</label>
                    <select class="form-control" formControlName="manPowerSkill"
                        [class.is-invalid]="formHelperService.canShowFieldErrors(form.get('manPowerSkill'))">
                        <option *ngFor="let manPowerSkill of manPowerSkills$ | async"
                            [value]="manPowerSkill._id">
                            {{manPowerSkill.name}}</option>
                    </select>
                    <ngx-error-field [field]="form.get('manPowerSkill')"></ngx-error-field>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="form-group">
                    <label for="inputCost">Valor (en pesos $)</label>
                    <input type="number" id="inputCost" class="form-control" [min]="1"
                        [class.is-invalid]="formHelperService.canShowFieldErrors(form.get('cost'))"
                        formControlName="cost">
                    <ngx-error-field [field]="form.get('cost')"></ngx-error-field>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                  <label for="description">Descripción</label>
                  <textarea fullWidth id="description" class="form-control" rows="3"
                    [class.is-invalid]="formHelperService.canShowFieldErrors(form.get('description'))"
                    formControlName="description"></textarea>
                  <ngx-error-field [field]="form.get('description')"></ngx-error-field>
                </div>
            </div>
            <div class="col-sm-1 mt-4">
                <button nbButton hero status="primary" shape="semi-round" (click)="save()">
                    <nb-icon [icon]="'save-outline'" pack="eva"></nb-icon>
                    <span class="d-none d-md-block">Aceptar</span>
                </button>
            </div>
        </div>
    </div>
</form>
<nb-card size="medium">
    <nb-card-header>
        <div class="row text-center">
            <div class="col-md-2">
                Mano de Obra
            </div>
            <div class="col-md-3">
                Tarea
            </div>
            <div class="col-md-3">
                Descripción
            </div>
            <div class="col-md-2">
                Costo
            </div>
            <div class="col-md-2">
                Acciones
            </div>
        </div>
    </nb-card-header>
    <nb-list>
        <nb-list-item class="border-bottom border-info"
            *ngFor="let manPowerBudget of manPowerBudgets; let i = index;" class="mb-1">
            <div class="w-100 text-center">
                <div class="row">
                    <div class="col-md-2">
                        {{manPowerBudget.manPower.name}}
                    </div>
                    <div class="col-md-3">
                        {{manPowerBudget.manPowerSkill.name}}
                    </div>
                    <div class="col-md-3">
                        {{manPowerBudget.description}}
                    </div>
                    <div class="col-md-2">
                        $ {{manPowerBudget.cost}}
                    </div>
                    <div class="col-md-2">
                        <button nbButton hero status="danger" shape="semi-round"
                        (click)="deleteManPowerBudget(manPowerBudget)">
                          <nb-icon [icon]="'trash-2-outline'" pack="eva"></nb-icon>
                          Borrar
                        </button>
                    </div>
                </div>
            </div>
        </nb-list-item>
    </nb-list>
</nb-card>